<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CODISH | ONLINE COMPILER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./static/css/customCss.css" rel="stylesheet">

    <!-- bootstrap icons  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- code mirror  -->
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <!-- code mirror theme  -->
    <link rel="stylesheet" href="codemirror/theme/3024-day.css">
    <link rel="stylesheet" href="codemirror/theme/3024-night.css">
    <link rel="stylesheet" href="codemirror/theme/abbott.css">
    <link rel="stylesheet" href="codemirror/theme/abcdef.css">
    <link rel="stylesheet" href="codemirror/theme/ambiance-mobile.css">
    <link rel="stylesheet" href="codemirror/theme/ayu-dark.css">
    <link rel="stylesheet" href="codemirror/theme/ayu-mirage.css">
    <link rel="stylesheet" href="codemirror/theme/base16-dark.css">
    <link rel="stylesheet" href="codemirror/theme/base16-light.css">
    <link rel="stylesheet" href="codemirror/theme/bespin.css">
    <link rel="stylesheet" href="codemirror/theme/blackboard.css">
    <link rel="stylesheet" href="codemirror/theme/cobalt.css">
    <link rel="stylesheet" href="codemirror/theme/colorforth.css">
    <link rel="stylesheet" href="codemirror/theme/darcula.css">
    <link rel="stylesheet" href="codemirror/theme/dracula.css">
    <link rel="stylesheet" href="codemirror/theme/duotone-dark.css">
    <link rel="stylesheet" href="codemirror/theme/duotone-light.css">
    <link rel="stylesheet" href="codemirror/theme/eclipse.css">
    <link rel="stylesheet" href="codemirror/theme/elegant.css">
    <link rel="stylesheet" href="codemirror/theme/erlang-dark.css">
    <link rel="stylesheet" href="codemirror/theme/gruvbox-dark.css">
    <link rel="stylesheet" href="codemirror/theme/hopscotch.css">
    <link rel="stylesheet" href="codemirror/theme/icecoder.css">
    <link rel="stylesheet" href="codemirror/theme/idea.css">
    <link rel="stylesheet" href="codemirror/theme/isotope.css">
    <link rel="stylesheet" href="codemirror/theme/juejin.css">
    <link rel="stylesheet" href="codemirror/theme/lesser-dark.css">
    <link rel="stylesheet" href="codemirror/theme/liquibyte.css">
    <link rel="stylesheet" href="codemirror/theme/lucario.css">
    <link rel="stylesheet" href="codemirror/theme/material-darker.css">
    <link rel="stylesheet" href="codemirror/theme/material-ocean.css">
    <link rel="stylesheet" href="codemirror/theme/material-palenight.css">
    <link rel="stylesheet" href="codemirror/theme/material.css">
    <link rel="stylesheet" href="codemirror/theme/mbo.css">
    <link rel="stylesheet" href="codemirror/theme/mdn-like.css">
    <link rel="stylesheet" href="codemirror/theme/midnight.css">
    <link rel="stylesheet" href="codemirror/theme/monokai.css">
    <link rel="stylesheet" href="codemirror/theme/moxer.css">
    <link rel="stylesheet" href="codemirror/theme/neat.css">
    <link rel="stylesheet" href="codemirror/theme/neo.css">
    <link rel="stylesheet" href="codemirror/theme/night.css">
    <link rel="stylesheet" href="codemirror/theme/nord.css">
    <link rel="stylesheet" href="codemirror/theme/oceanic-next.css">
    <link rel="stylesheet" href="codemirror/theme/panda-syntax.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-dark.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-light.css">
    <link rel="stylesheet" href="codemirror/theme/pastel-on-dark.css">
    <link rel="stylesheet" href="codemirror/theme/railscasts.css">
    <link rel="stylesheet" href="codemirror/theme/rubyblue.css">
    <link rel="stylesheet" href="codemirror/theme/seti.css">
    <link rel="stylesheet" href="codemirror/theme/shadowfox.css">
    <link rel="stylesheet" href="codemirror/theme/solarized.css">
    <link rel="stylesheet" href="codemirror/theme/ssms.css">
    <link rel="stylesheet" href="codemirror/theme/the-matrix.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-bright.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-eighties.css">
    <link rel="stylesheet" href="codemirror/theme/ttcn.css">
    <link rel="stylesheet" href="codemirror/theme/twilight.css">
    <link rel="stylesheet" href="codemirror/theme/vibrant-ink.css">
    <link rel="stylesheet" href="codemirror/theme/xq-dark.css">
    <link rel="stylesheet" href="codemirror/theme/xq-light.css">
    <link rel="stylesheet" href="codemirror/theme/yeti.css">
    <link rel="stylesheet" href="codemirror/theme/yonce.css">
    <link rel="stylesheet" href="codemirror/theme/zenburn.css">
    
    <!-- js files  -->
    <script src="codemirror/lib/codemirror.js"></script>
    <!-- codemirror mode js -->
    <script src="codemirror/mode/clike/clike.js"></script>
    <script src="codemirror/mode/python/python.js"></script>
    <!-- codemirror addon js -->
    <script src="codemirror/addon/edit/closebrackets.js"></script>

    <!-- /google fonts  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@200&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Spice&display=swap" rel="stylesheet">
    
    <!-- custom js files  -->
    <script src="static/js/programmingLanguageList.js"></script>
    <script src="static/js/themesList.js"></script>
  </head>
  <body>
    <div class="container  top-menu mt-1">
      <!-- menu bar  -->
      <div class="row mb-2">
        <div class="col col-6 logo">
         < CODISH />
        </div>

        <!-- right sub menus  -->
        <div class="col-6 right-menu">

          <div class="right-menu-list ">
            <nav class="navbar navbar-expand-lg text-white">
              <div class="container-fluid">
               
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                   
                    <li class="nav-item">
                      <a class="nav-link" href="#">Disclaimer</a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="#">Privacy Policy</a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="#">About</a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="#">Contact</a>
                    </li>

                    <li class="nav-item">
                      <a class="nav-link" href="https://techwithshiddh.blogspot.com/">Blog</a>
                    </li>

                  </ul>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
      <div class="container px-3 rounded">
        <!-- main container  -->
        <div class="row">
          <!-- left container  -->
          <div class="col col-8">
            <!-- top menus row  -->
            <div class="row" >
              <!-- choose language container  -->
              <div class="col-6 ">

                <div class="row">
                  <!-- choose langua container  -->
                <div class="col-6 select float-left" title="choose programming language">
                  <label for="selectLanguage" class="form-label">Choose Language</label>
                  <select class="form-select" onchange="selectLanguageChangeValue()" id="selectLanguage">
                    <option >Language </option>
                  </select>
                </div>
                <!-- choose theme container  -->
                <div class="col-6 select" title="choose theme for editor">
                  <label for="selectTheme" class="form-label">Choose Theme</label>
                  <select class="form-select" onchange="selectedThemeOnChange()" id="selectTheme">
                    <option selected>Choose Theme </option> 
                  </select>
                </div>
                </div>
              </div>

              
              <!-- code run buttons container -->
              <div class="col-6 code-run-buttons" style="margin-top: 32px;">
                <div class="row">
                  <div class="col-">
                    <button class="btn btn-warning" title="COPY CODE" id="copyCodeButton"><i class="bi bi-copy"></i></button>
                    <button  class="btn btn-success" id="run-button" title="RUN CODE"><i class="bi bi-play-fill"></i></button>
                    <button  class="btn btn-danger" id="resetCodeButton" title="RESET CODE"><i class="bi bi-arrow-repeat"></i></button>
                  </div>
                </div>
    
              </div>
            </div>
            <!-- editor row  -->
            <div class="row">
              <div class="col">
                <!-- text area  -->
                <div class="mb-3 mt-2 rounded">
                  <!-- <label for="exampleFormControlTextarea1" class="form-label">Example textarea</label> -->
                  <textarea class="form-control" id="editor"></textarea>
                </div>

              </div>
            </div>
          </div>
          <!-- right container  -->
          <div class="col-4 right-container">
            <div class="row">
              <div class="col">
                <div class="mb-3">
                  <label for="exampleFormControlTextarea1" class="form-label ">Input</label>
                  <textarea class="form-control input" id="input-textarea" placeholder="Input will be entered from here..." id="exampleFormControlTextarea1" ></textarea>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="mb-3">
                  <label for="exampleFormControlTextarea1" class="form-label ">Output</label>
                  <textarea class="form-control output" id="output-textarea" placeholder="Output will Display Here..." readonly id="exampleFormControlTextarea1" ></textarea>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
<div class="container footer h-50 text-center">
Designed and Engineered by Er. Shivam Shankhdhar.
</div>

      <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("editor"),{
          mode: "text/x-c++src",
          theme: "blackboard",
          lineNumbers:true,
          autoCloseBrackets:true,

        });
        var width = window.innerWidth;
        editor.setSize(0.52*width,"480");
            // theme list from array 
            let selectList = document.getElementById("selectTheme");
            let items = themeList.sort(); 
            for(var i in items) {
              var option = document.createElement("option");
              option.value = items[i];
              option.text = items[i];
              if(items[i] === "blackboard"){
                option.setAttribute("selected",true);
              }
              selectList.appendChild(option);
            }      
              // select theme based on the select theme option 
                function selectedThemeOnChange (){
                  var selectedTheme = document.getElementById("selectTheme").value;
                  editor.setOption("theme",selectedTheme)
                  
                }

            let selectLanguage = document.getElementById("selectLanguage");
            let programmingLanguage = programmingLanguageList.sort(); 
            for(var i in programmingLanguageList) {
              var option   = document.createElement("option");
              option.value = programmingLanguage[i];
              option.text  = programmingLanguage[i];
              selectLanguage.appendChild(option);
            }   

            function selectLanguageChangeValue (){
                  // var selectLanguage = document.getElementById("selectLangauge");
                  if(selectLanguage.value === "JAVA"){
                    editor.setOption("mode","text/x-java");
                  }else if(selectLanguage.value === "PYTHON"){
                    let value = `print("Hello World!");`
                    editor.setOption("value",value); 
                    editor.setOption("mode","text/x-java");
                  }else{
                    editor.setOption("mode","text/x-c++src");
                  }
                }
            //  connecting api with frontend 

            let input     = document.getElementById("input-textarea");
            let output    = document.getElementById("output-textarea");
            let runButton = document.getElementById("run-button");
            var code;

            runButton.addEventListener("click",async function(){
              
              code = {
                "code":editor.getValue(),
                "input":input.value,
                "lang":selectLanguage.value,
              };
              var oData=await fetch("http://localhost:8000/compile",{
                method:"POST",
                headers:{
                  "Content-Type":"application/json"
                },
                body:JSON.stringify(code)
              })
              
              var d=await oData.json();
              output.value = d.output;
              
            });

          let copyCodeBtn = document.getElementById("copyCodeButton");
          copyCodeBtn.addEventListener("click", () => {
            console.log("code copy btn clicked");
            var copyText = editor.getValue();

            copyText.select;
            //copyText.setSelectionRange(0, 99999); // For mobile devices

            // Copy the text inside the text field
            navigator.clipboard.writeText(copyText);

            // Alert the copied text
            alert("Code Copied");
          });

      //reset code editor according to selected language
      let resetCodeButton = document.getElementById("resetCodeButton");
      resetCodeButton.addEventListener("click",()=>{
        // console.log("clicked reset button");
        // let selectLanguage = document.getElementById("selectLanguage");
        if(selectLanguage.value === "PYTHON"){
          let v = 'print("Hello World!");';
          editor.setOption("value"," "); 
          editor.setOption("value",v); 
        }
      });
      </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>